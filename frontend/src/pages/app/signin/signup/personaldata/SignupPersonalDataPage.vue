<template>
  <div id="signup-personal-data-wrapper">
    <div v-if="devMode"
         @click="devSkipInput">SKIP</div>

    <div class="signup-personal-data__content">
      <h1><strong>ì²˜ìŒ ì˜¤ì…¨ë„¤ìš”!ğŸ™Œ</strong><br />ë‹¹ì‹ ì€ ì–´ë–¤ ì‚¬ëŒì¸ê°€ìš”?ğŸ‘‚</h1>
      <h3>ì•„ë˜ ì •ë³´ë¥¼ ì…ë ¥í•˜ë©´ ì˜ ë§ì„ ë“¯í•œ ìµëª… ì‚¬ìš©ìì™€ í¸ì§€ë¥¼ ì£¼ê³ ë°›ê²Œ ë  í™•ë¥ ì´ ì»¤ì ¸ìš”.</h3>
      <h4>ì…ë ¥í•œ ê°œì¸ì •ë³´ëŠ” ë‹¤ë¥¸ ì‚¬ìš©ì<small>(ë‹‰ë„¤ì„ ì œì™¸)</small>ë‚˜ ì™¸ë¶€ ê°œì¸Â·ì—…ì²´ì— ì œê³µë˜ì§€ ì•Šì•„ìš”. <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ (ì¤€ë¹„ ì¤‘)</a></h4>

      <hr />

      <div class="signup-personal-data__content__form">
        <div class="signup-personal-data__content__form__nickname">
          <span>ë‹‰ë„¤ì„</span>

          <v-text-field v-model="nickname"
                        hint="ì—°ë™ ê³„ì •ì—ì„œ ê°€ì ¸ì˜¨ ì´ë¦„ì„ ìë™ìœ¼ë¡œ ì…ë ¥í–ˆì–´ìš”. ì§€ê¸ˆ ë³€ê²½í•  ìˆ˜ë„ ìˆê³ , ë‚˜ì¤‘ì— í”„ë¡œí•„ í˜ì´ì§€ì—ì„œë„ ë³€ê²½í•  ìˆ˜ ìˆì–´ìš”."
                        single-line
                        persistent-hint
                        :hide-details="nicknameFieldHideHint"
                        @input="onNicknameFieldInput" />
        </div>

        <div class="signup-personal-data__content__form__gender">
          <span>ì„±ë³„</span>

          <v-select v-model="genderItemSelected"
                    :items="genderItems"
                    item-title="title"
                    item-value="value"
                    label="ì„±ë³„"
                    return-object
                    single-line />
        </div>

        <div class="signup-personal-data__content__form__age">
          <span>ë‚˜ì´ëŒ€</span>

          <v-select v-model="ageItemSelected"
                    :items="ageItems"
                    item-title="title"
                    item-value="value"
                    label="ë‚˜ì´ëŒ€"
                    return-object
                    single-line />
        </div>

        <div class="signup-personal-data__content__form__job">
          <span>ì§ì—… ë¶„ë¥˜</span>

          <v-select v-model="jobItemSelected"
                    :items="jobItems"
                    item-title="title"
                    item-value="value"
                    label="ì§ì—… ë¶„ë¥˜"
                    return-object
                    single-line />
        </div>
      </div>
    </div>
  </div>
</template>

<script lang="ts">
import { Vue } from "vue-class-component";

export default class SignupPersonalDataPage extends Vue {
  nickname = "";
  nicknameFieldHideHint = false;

  genderItems = [
    {
      value: "male",
      title: "ë‚¨ì„±",
    }, {
      value: "female",
      title: "ì—¬ì„±",
    }, {
      value: "nonbinary",
      title: "ë…¼ë°”ì´ë„ˆë¦¬ / ê¸°íƒ€",
    }, {
      value: "notselected",
      title: "ì„ íƒí•˜ì§€ ì•ŠìŒ",
    },
  ];

  genderItemSelected = this.genderItems[this.genderItems.length - 1];

  ageItems = [
    {
      value: "ten",
      title: "10ëŒ€",
    },
    {
      value: "twenty",
      title: "20ëŒ€",
    },
    {
      value: "thirty",
      title: "30ëŒ€",
    },
    {
      value: "fourty",
      title: "40ëŒ€",
    },
    {
      value: "fifty",
      title: "50ëŒ€ ì´ìƒ",
    },
    {
      value: "notselected",
      title: "ì„ íƒí•˜ì§€ ì•ŠìŒ",
    },
  ];

  ageItemSelected = this.ageItems[this.ageItems.length - 1];

  jobItems = [
    {
      value: "student",
      title: "ì´ˆÂ·ì¤‘Â·ê³ ë“±í•™ìƒ",
    },
    {
      value: "student_univ",
      title: "ëŒ€í•™ìƒ",
    },
    {
      value: "management",
      title: "ê²½ì˜Â·ê´€ë¦¬",
    },
    {
      value: "office_tech",
      title: "ì‚¬ë¬´Â·ê¸°ìˆ ì§",
    },
    {
      value: "professional",
      title: "ì „ë¬¸ì§",
    },
    {
      value: "freelancer",
      title: "í”„ë¦¬ëœì„œ",
    },
    {
      value: "simple_labor",
      title: "ë‹¨ìˆœë…¸ë¬´ (ê¸°ëŠ¥Â·ì‘ì—… ë“±)",
    },
    {
      value: "seller",
      title: "íŒë§¤Â·ì˜ì—…Â·ë§ˆì¼€íŒ…",
    },
    {
      value: "service",
      title: "ì„œë¹„ìŠ¤",
    },
    {
      value: "self_emp",
      title: "ìì˜ì—…",
    },
    {
      value: "homemaker",
      title: "ì „ì—…ì£¼ë¶€",
    },
    {
      value: "noemp_etc",
      title: "ë¬´ì§Â·ê¸°íƒ€",
    },
    {
      value: "notselected",
      title: "ì„ íƒí•˜ì§€ ì•ŠìŒ",
    },
  ];

  jobItemSelected = this.jobItems[this.jobItems.length - 1];

  get devMode(): boolean {
    return process.env.VUE_APP_DEVMODE === "true";
  }

  mounted(): void {
    this.nickname = this.$store.state.auth.userBasicInfo!.nickname;
  }

  onNicknameFieldInput(): void {
    this.nicknameFieldHideHint = true;
  }

  devSkipInput(): void {
    if(this.devMode) {
      this.$store.commit("auth/registerLoginState", {
        user: {
          ...this.$store.state.auth.userBasicInfo,
          signedUp: true,
        },
        token: this.$store.state.auth.token,
      });
      window.location.href = "/";
    }
  }
}
</script>

<style lang="scss" scoped>
#signup-personal-data-wrapper {
  .signup-personal-data {
    &__content {
      line-height: 1.5;
      width: 80vw;
      margin: auto;

      h1 {
        font-weight: 400;
        font-size: 3em;
      }

      h3 {
        font-weight: 300;
        font-size: 1.5em;
        margin-block-start: 0.5em;
        margin-block-end: 0.5em;
      }

      h4 {
        font-weight: 300;
        font-size: 1em;

        a { text-decoration: underline; }
      }

      hr {
        margin: 1.5rem 0;
      }

      &__form {
        display: flex;
        flex-wrap: wrap;
        width: 95%;
        margin: auto;

        & > div {
          margin: 1em 1em;
          width: calc(50% - (1em * 2));

          & > span {
            display: inline-block;
            margin: 0 0.5em 0.5em 0;
            font-size: 1.25em;
          }
        }
      }
    }
  }
}
</style>
